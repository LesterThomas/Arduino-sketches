<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>
        </title>
        <link rel="stylesheet" href="https://ajax.aspnetcdn.com/ajax/jquery.mobile/1.1.1/jquery.mobile-1.1.1.min.css" />
        <link rel="stylesheet" href="my.css" />
        <style>
            /* App custom styles */
        </style>
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js">
        </script>
        <script src="https://ajax.aspnetcdn.com/ajax/jquery.mobile/1.1.1/jquery.mobile-1.1.1.min.js">
        </script>
        <script src="my.js">
        </script>
        <script>
        var JSONData;
        $( '#main' ).live( 'pageinit',function(event){
            
            

 

            $.getJSON('lights.json', function(data) {
                JSONData=data;
            })
            .success(function() {
                $.each(JSONData, function(key, val) {
                    var lightName="#Light" + key;
                    var onOffText;
                    if (val[0]==1) { onOffText="on";} else { onOffText="off";}
                    //alert("setting "+lightName+" to "+ val);
                    $(lightName).val(onOffText);
                    $(lightName).slider("refresh");

                    var occupiedName="#Occupied" + key;
                    if (val[1]==1) { onOffText="block";} else { onOffText="none";}
                    $(occupiedName).css({display: onOffText});

                    var checkboxName="#Linked" + key;
                    if (val[2]==1) { onOffText=true;} else { onOffText=false;}
                    $(checkboxName).prop("checked",onOffText);
                    $(checkboxName).checkboxradio("refresh");

                    //$(checkboxName).attr('checked',onOffText);

                }); 
            })
            .error(function(jqXHR, textStatus, errorThrown) { 
                alert("error");
                alert(jqXHR);
                alert(textStatus);
                alert(errorThrown); 
            })
            .complete(function() { 

            });

        });



        </script>
    </head>
    <body>
        <!-- Home -->
        <div data-role="page" id="main">
            <div data-theme="a" data-role="header">
                <h3>
                    House Control
                </h3>
            </div>
            <div data-role="content">
                <div style=" text-align:center">
                    <img style="width: 288px; height: 100px" src="http://dl.dropbox.com/u/9594656/Arduino/web/LestersHouse.jpg" />
                </div>
                <table width="288" align="center">
                    <tr>
                        <td>
                            Lounge
                        </td>
                        <td>
                            <fieldset data-role="controlgroup">
                                <label for="Light2">
                                </label>
                                <select name="toggleswitch3" id="Light2" data-theme="" data-role="slider" data-mini="true">
                                    <option value="off">
                                        Off
                                    </option>
                                    <option value="on">
                                        On
                                    </option>
                                </select>
                            </fieldset>
                        </td>
                        <td>
                            <img id="Occupied2" src="http://dl.dropbox.com/u/9594656/Arduino/web/Occupied.jpg" />
                        </td>
                        <td>
                            <fieldset data-role="controlgroup" data-type="vertical" data-mini="true">
                                <legend>
                                </legend>
                                <input id="Linked2" name="" type="checkbox" value="2" checked />
                                <label for="Linked2">
                                    link
                                </label>
                            </fieldset>
                        </td>
                    </tr>
                    <tr>
                        <td>
                            2nd Lounge
                        </td>
                        <td>
                            <fieldset data-role="controlgroup">
                                <label for="Light3">
                                </label>
                                <select name="toggleswitch3" id="Light3" data-theme="" data-role="slider" data-mini="true">
                                    <option value="off">
                                        Off
                                    </option>
                                    <option value="on">
                                        On
                                    </option>
                                </select>
                            </fieldset>
                        </td>
                        <td>
                            <img id="Occupied3" src="http://dl.dropbox.com/u/9594656/Arduino/web/Occupied.jpg" />
                        </td>
                        <td>
                            <fieldset data-role="controlgroup" data-type="vertical" data-mini="true">
                                <legend>
                                </legend>
                                <input id="Linked3" name="" type="checkbox" value="3" checked />
                                <label for="Linked3">
                                    link
                                </label>
                            </fieldset>
                        </td>
                    </tr> 
                    <tr>
                        <td>
                            Porch
                        </td>
                        <td>
                            <fieldset data-role="controlgroup">
                                <label for="Light4">
                                </label>
                                <select name="toggleswitch3" id="Light4" data-theme="" data-role="slider" data-mini="true">
                                    <option value="off">
                                        Off
                                    </option>
                                    <option value="on">
                                        On
                                    </option>
                                </select>
                            </fieldset>
                        </td>
                        <td>
                            <img id="Occupied4" src="http://dl.dropbox.com/u/9594656/Arduino/web/Occupied.jpg" />
                        </td>
                        <td>
                            <fieldset data-role="controlgroup" data-type="vertical" data-mini="true">
                                <legend>
                                </legend>
                                <input id="Linked4" name="" type="checkbox" value="4" />
                                <label for="Linked4">
                                    link
                                </label>
                            </fieldset>
                        </td>
                    </tr> 
                    <tr>
                        <td>
                            Kitchen
                        </td>
                        <td>
                            <fieldset data-role="controlgroup">
                                <label for="Light5">
                                </label>
                                <select name="toggleswitch3" id="Light5" data-theme="" data-role="slider" data-mini="true">
                                    <option value="off">
                                        Off
                                    </option>
                                    <option value="on">
                                        On
                                    </option>
                                </select>
                            </fieldset>
                        </td>
                        <td>
                            <img id="Occupied5" src="http://dl.dropbox.com/u/9594656/Arduino/web/Occupied.jpg" />
                        </td>
                        <td>
                            <fieldset data-role="controlgroup" data-type="vertical" data-mini="true">
                                <legend>
                                </legend>
                                <input id="Linked5" name="" type="checkbox" value="5" />
                                <label for="Linked5">
                                    link
                                </label>
                            </fieldset>
                        </td>
                    </tr>                                                            
                </table>
            </div>
            <div data-theme="a" data-role="footer" data-position="fixed">
                <h3>
                    Lester Thomas  2012
                </h3>
            </div>
        </div>
        <script>
            //App custom javascript
        </script>
    </body>
</html>